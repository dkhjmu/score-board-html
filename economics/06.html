<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6ë‹¨ê³„: 20ë…„ í›„, ë‚´ ëˆì€ ì–¼ë§ˆê°€ ë ê¹Œ?</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --tech-color: #e74c3c; /* ê³ ìœ„í—˜: ë¹¨ê°• */
            --div-color: #27ae60;  /* ë°°ë‹¹ì£¼: ì´ˆë¡ */
            --safe-color: #f39c12; /* ì•ˆì „ìì‚°: ë…¸ë‘ */
            --line-color: #2c3e50; /* ê·¸ë˜í”„ ì„  ìƒ‰ */
            --text-color: #2c3e50;
        }

        body {
            font-family: 'Jua', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            width: 100%;
            max-width: 650px;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            padding: 25px;
        }

        /* 1. ì°¨íŠ¸ ì˜ì—­ */
        .chart-wrapper {
            width: 100%;
            height: 300px;
            background-color: #fcfcfc;
            border: 1px solid #eee;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        svg { width: 100%; height: 100%; }

        /* ê¸°ì¤€ì„  (ì›ê¸ˆ) */
        .line-base { stroke: #ccc; stroke-width: 1; stroke-dasharray: 5, 5; }
        /* ë‚´ ìì‚° ê·¸ë˜í”„ */
        .line-asset {
            fill: none;
            stroke: var(--line-color);
            stroke-width: 3;
            stroke-linejoin: round;
            filter: drop-shadow(0px 2px 2px rgba(0,0,0,0.2));
        }
        /* ì  */
        .dot { fill: var(--line-color); r: 4; }

        .chart-label { font-size: 0.8rem; fill: #999; }

        /* 2. ìì‚° ì„¤ì • ì¹´ë“œ */
        .asset-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            border-left: 5px solid #ccc;
            background: #f9f9f9;
        }
        .row-tech { border-color: var(--tech-color); }
        .row-div { border-color: var(--div-color); }
        .row-safe { border-color: var(--safe-color); }

        .asset-info { flex: 1; }
        .asset-name { font-weight: bold; display: block; font-size: 1rem; }
        .asset-percent { font-weight: bold; font-size: 1.1rem; margin-left: 10px; min-width: 50px; text-align: right;}

        input[type="range"] { flex: 2; cursor: pointer; margin: 0 10px; }

        /* 3. í•˜ë‹¨ ì»¨íŠ¸ë¡¤ */
        .summary-area {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px dashed #eee;
        }

        .total-check { font-weight: bold; margin-bottom: 10px; display: block;}
        .ok { color: var(--div-color); }
        .no { color: var(--tech-color); }

        .btn-start {
            background-color: var(--text-color);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
            width: 100%;
        }
        .btn-start:active { transform: scale(0.98); }
        .btn-start:disabled { background-color: #ccc; cursor: not-allowed; }

        /* ê²°ê³¼ í…ìŠ¤íŠ¸ */
        .result-text {
            margin-top: 15px;
            font-size: 1rem;
            line-height: 1.5;
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }

    </style>
</head>
<body>

<h1 style="text-align:center;">6ë‹¨ê³„: 20ë…„ í›„, ë‚´ ëˆì€?</h1>
<p style="text-align:center; color:#666; margin-bottom:20px;">ì›ê¸ˆ 1,000ë§Œ ì›ì´ ì‹œê°„(20ë…„)ì„ ë§Œë‚˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?</p>

<div class="container">

    <div class="chart-wrapper">
        <svg id="chartSvg" viewBox="0 0 600 300">
            <line x1="0" y1="250" x2="600" y2="250" class="line-base" /> <text x="10" y="245" class="chart-label">ì›ê¸ˆ (1,000ë§Œ)</text>

            <path id="assetPath" class="line-asset" d="M 0 250" />
            <circle id="endDot" class="dot" cx="0" cy="250" style="display:none;"/>
        </svg>
    </div>

    <div class="asset-row row-tech">
        <div class="asset-info">
            <span class="asset-name">ğŸš€ ë¡œì¼“ ë°”ì´ì˜¤</span>
            <span style="font-size:0.8rem; color:#666;">ë³€ë™ì„± í¼ (ìœ„í—˜)</span>
        </div>
        <input type="range" id="slTech" min="0" max="100" value="20" oninput="updateUI()">
        <span class="asset-percent" id="txtTech">20%</span>
    </div>

    <div class="asset-row row-div">
        <div class="asset-info">
            <span class="asset-name">ğŸ›¡ï¸ ê±°ë¶ì´ ì‹í’ˆ</span>
            <span style="font-size:0.8rem; color:#666;">ì•ˆì •ì  ì„±ì¥ (ë³´í†µ)</span>
        </div>
        <input type="range" id="slDiv" min="0" max="100" value="50" oninput="updateUI()">
        <span class="asset-percent" id="txtDiv">50%</span>
    </div>

    <div class="asset-row row-safe">
        <div class="asset-info">
            <span class="asset-name">ğŸ¦ ì•ˆì „ ê¸ˆê³ </span>
            <span style="font-size:0.8rem; color:#666;">í˜„ê¸ˆ/ì´ì (ì•ˆì „)</span>
        </div>
        <input type="range" id="slSafe" min="0" max="100" value="30" oninput="updateUI()">
        <span class="asset-percent" id="txtSafe">30%</span>
    </div>

    <div class="summary-area">
        <span id="totalMsg" class="total-check ok">í•©ê³„: 100% (ì¤€ë¹„ ì™„ë£Œ)</span>
        <button id="btnStart" class="btn-start" onclick="runSimulation()">â±ï¸ 20ë…„ íˆ¬ì ì‹¤í–‰!</button>
        <div id="resultBox" class="result-text"></div>
    </div>

</div>

<script>
    // ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
    const slTech = document.getElementById('slTech');
    const slDiv = document.getElementById('slDiv');
    const slSafe = document.getElementById('slSafe');
    const txtTech = document.getElementById('txtTech');
    const txtDiv = document.getElementById('txtDiv');
    const txtSafe = document.getElementById('txtSafe');

    const totalMsg = document.getElementById('totalMsg');
    const btnStart = document.getElementById('btnStart');
    const resultBox = document.getElementById('resultBox');

    const chartSvg = document.getElementById('chartSvg');
    const assetPath = document.getElementById('assetPath');
    const endDot = document.getElementById('endDot');

    // ì´ˆê¸° ìê¸ˆ ë° ì„¤ì •
    const initialMoney = 1000; // 1000ë§Œì›
    const years = 20;

    // UI ì—…ë°ì´íŠ¸
    function updateUI() {
        const p1 = parseInt(slTech.value);
        const p2 = parseInt(slDiv.value);
        const p3 = parseInt(slSafe.value);
        const sum = p1 + p2 + p3;

        txtTech.innerText = p1 + '%';
        txtDiv.innerText = p2 + '%';
        txtSafe.innerText = p3 + '%';

        if (sum === 100) {
            totalMsg.innerText = "í•©ê³„: 100% (ì¤€ë¹„ ì™„ë£Œ)";
            totalMsg.className = "total-check ok";
            btnStart.disabled = false;
        } else {
            totalMsg.innerText = `í•©ê³„: ${sum}% (100%ë¥¼ ë§ì¶°ì£¼ì„¸ìš”)`;
            totalMsg.className = "total-check no";
            btnStart.disabled = true;
        }
    }

    // ì‹œë®¬ë ˆì´ì…˜ ë¡œì§
    function runSimulation() {
        let money = initialMoney;
        let history = [initialMoney];

        // ë¹„ì¤‘
        const wTech = parseInt(slTech.value) / 100;
        const wDiv = parseInt(slDiv.value) / 100;
        const wSafe = parseInt(slSafe.value) / 100;

        // 20ë…„ ë£¨í”„
        for(let i=0; i<years; i++) {
            // ê° ìì‚°ë³„ ìˆ˜ìµë¥  ìƒì„± (ëœë¤)
            // ë¡œì¼“: -60% ~ +40% (ë³€ë™ì„± í¼, í‰ê·  ë†’ìŒ)
            const rTech = (Math.random() * 1.0) - 0.45;

            // ê±°ë¶ì´: -10% ~ +20% (ë³€ë™ì„± ì‘ìŒ)
            const rDiv = (Math.random() * 0.3) - 0.1;

            // ê¸ˆê³ : +2% ê³ ì •
            const rSafe = 0.03;

            // í¬íŠ¸í´ë¦¬ì˜¤ í†µí•© ìˆ˜ìµë¥  (ê°€ì¤‘ í‰ê· )
            const totalReturn = (wTech * rTech) + (wDiv * rDiv) + (wSafe * rSafe);

            // ë³µë¦¬ ì ìš©
            money = money * (1 + totalReturn);
            history.push(money);
        }

        drawChart(history);
        showResult(history);
    }

    // ì°¨íŠ¸ ê·¸ë¦¬ê¸° í•¨ìˆ˜
    function drawChart(data) {
        // Yì¶• ìŠ¤ì¼€ì¼ë§ (ìµœëŒ€ê°’ì— ë”°ë¼ ê·¸ë˜í”„ ë†’ì´ ì¡°ì ˆ)
        const maxVal = Math.max(...data, initialMoney * 1.5); // ìµœì†Œí•œ ì›ê¸ˆì˜ 1.5ë°° ë†’ì´ëŠ” í™•ë³´
        const minVal = Math.min(...data, initialMoney * 0.5); // ìµœì†Œí•œ ì›ê¸ˆì˜ 0.5ë°° ë°”ë‹¥ì€ í™•ë³´

        // SVG ì¢Œí‘œ ë³€í™˜
        // X: 0 ~ 600
        // Y: 300 ~ 0 (ì—¬ë°± ê³ ë ¤)
        const getX = (idx) => (idx / years) * 600;
        // 50px ì—¬ë°±ì„ ë‘ê³  ë§¤í•‘
        const getY = (val) => 300 - 30 - ((val) / (maxVal)) * 250;

        let d = "";
        data.forEach((val, i) => {
            const x = getX(i);
            const y = getY(val);
            if(i===0) d += `M ${x} ${y}`;
            else d += ` L ${x} ${y}`;
        });

        // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ (Stroke Dasharray)
        assetPath.setAttribute('d', d);

        // ë§ˆì§€ë§‰ ì  ìœ„ì¹˜
        const lastX = getX(years);
        const lastY = getY(data[years]);
        endDot.setAttribute('cx', lastX);
        endDot.setAttribute('cy', lastY);
        endDot.style.display = 'block';

        // ì›ê¸ˆì„  ìœ„ì¹˜ ì¬ì¡°ì • (Yì¶• ìŠ¤ì¼€ì¼ì— ë§ì¶°ì„œ)
        const baseLineY = getY(initialMoney);
        const lineBase = document.querySelector('.line-base');
        lineBase.setAttribute('y1', baseLineY);
        lineBase.setAttribute('y2', baseLineY);

        // ì›ê¸ˆ í…ìŠ¤íŠ¸ ìœ„ì¹˜ ì¡°ì •
        document.querySelector('.chart-label').setAttribute('y', baseLineY - 5);
    }

    function showResult(data) {
        const finalMoney = data[years];
        const profit = finalMoney - initialMoney;
        const returnRate = (profit / initialMoney) * 100;

        resultBox.style.display = 'block';

        let msg = `<strong>ğŸ 20ë…„ ë’¤ ê²°ê³¼: ${Math.round(finalMoney).toLocaleString()}ë§Œ ì›</strong><br>`;
        msg += `(${returnRate > 0 ? '+' : ''}${returnRate.toFixed(1)}% ìˆ˜ìµ)<br><br>`;

        // ê·¸ë˜í”„ ëª¨ì–‘ ë¶„ì„ (êµìœ¡ì  í”¼ë“œë°±)
        const wTech = parseInt(slTech.value);

        if (wTech > 60) {
            msg += "ğŸ“ˆ <strong>ë¡¤ëŸ¬ì½”ìŠ¤í„° ì½”ìŠ¤:</strong><br>ê·¸ë˜í”„ê°€ ì—„ì²­ë‚˜ê²Œ ìš”ë™ì³¤ì£ ? ìš´ì´ ì¢‹ìœ¼ë©´ ëŒ€ë°•ì´ì§€ë§Œ, ì¤‘ê°„ì— ë°˜í† ë§‰ ë‚  ë•Œ ë²„í‹°ê¸° í˜ë“¤ì—ˆì„ ê±°ì˜ˆìš”.";
        } else if (parseInt(slSafe.value) > 70) {
            msg += "ğŸ¢ <strong>ê±°ë¶ì´ ì½”ìŠ¤:</strong><br>ê·¸ë˜í”„ê°€ ê±°ì˜ ì¼ì§ì„ ì´ë„¤ìš”. ë§ˆìŒì€ í¸í•˜ì§€ë§Œ, ëˆì´ ë§ì´ ë¶ˆì–´ë‚˜ì§„ ì•Šì•˜ì–´ìš”.";
        } else {
            msg += "âœ¨ <strong>í™©ê¸ˆ ë°¸ëŸ°ìŠ¤:</strong><br>ê·¸ë˜í”„ê°€ ê¾¸ì¤€íˆ ìš°ìƒí–¥í•˜ëŠ” ëª¨ìŠµì´ ë³´ì´ë‚˜ìš”? ì´ê²Œ ë°”ë¡œ ë³µë¦¬ì˜ ë§ˆë²•ì„ ëˆ„ë¦¬ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ì—ìš”.";
        }

        resultBox.innerHTML = msg;
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateUI();
</script>
</body>
</html>